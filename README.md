# ğŸ±:Harmony:ğŸ±
# í”„ë¡œì íŠ¸ ì†Œê°œ
- ìŒì‹ì ë“¤ì˜ ë°°ë‹¬ ë° í¬ì¥ ì£¼ë¬¸ ê´€ë¦¬, ê²°ì œ, ê·¸ë¦¬ê³  ì£¼ë¬¸ ë‚´ì—­ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í”Œë«í¼ ì…ë‹ˆë‹¤.

   Â° Spring Bootë¥¼ ì‚¬ìš©í•œ ì•ˆì •ì ì¸ ì›¹ êµ¬í˜„,Â PostgreSQLë¡œ ë°ì´í„° ê´€ë¦¬í•©ë‹ˆë‹¤. <br>
    Â° ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì´ê¸° ìœ„í•´ JPAë¥¼ ì„ íƒí•´ Spring Data JPAì™€ì˜ í†µí•©ì„ í†µí•œ íš¨ìœ¨ì ì¸Â ë°ì´í„° ì²˜ë¦¬ë¥¼ í•˜ê³ ì í–ˆìŠµë‹ˆë‹¤.<br>
      Â° JPAì˜ ORM ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ê°ì²´ì™€ ë°ì´í„°ë² ì´ìŠ¤ ê°„ì˜ ë§¤í•‘ì„ ìµœì í™”í–ˆìŠµë‹ˆë‹¤. <br>
        Â° API ëª…ì„¸ì„œ : https://caring-pin-8ac.notion.site/API-136dcca716cf808aa2fdee25878f0747

  <br>
  
## íŒ€ì› êµ¬ì„±
<div align="center">

| ìœ¤í™ì°¬ | ì´í•œì£¼ | ì¡°ì°½í˜„ | ì¥ìœ¤ì§€ |
| :------: |  :------: | :------: | :------: |
|[<img width="98" src="https://github.com/user-attachments/assets/cef5bc12-a48b-43be-ad5c-43396028e6c9"> <br> @Chani0324](https://github.com/Chani0324)|[<image width="98" src="https://github.com/user-attachments/assets/d8730fb7-92f5-42d4-b8bd-435e87129198"><br> @yanJuicy](https://github.com/yanJuicy)|[<img width="99" src="https://github.com/user-attachments/assets/43f4d21f-7891-46a4-bd25-745120fb6c26"> <br>@ch0Changhyun](https://github.com/ch0Changhyun)|[<img width="98" src="https://github.com/user-attachments/assets/dd0e73fb-f5ef-4c47-9cda-2af955d54f5b"> <br>@elliaaa](https://github.com/elliaaa)|
</div>

</div>


## 1. ê°œë°œ í™˜ê²½
- í”„ë¡œì íŠ¸ ê°œë°œ í™˜ê²½ : IntelliJ
- ì‚¬ìš© ê¸°ìˆ  : Java, Spring Boot
- DB ë° ì„œë²„ ê´€ë¦¬ : AWS
- ë°°í¬ : Docker, Git Action
- ìˆ˜í–‰ í™˜ê²½ : Spring Security, Spring Data JPA â€¦
- ë²„ì „ ê´€ë¦¬ : Git
- í˜‘ì—… íˆ´ : Slack, Notion
  
## 2. ê°œë°œ ê¸°ê°„ ë° ì‘ì—… ê´€ë¦¬
- 24-11-07 ~ 24-11-18(ì´ 12ì¼)
  
## 3. ì•„í‚¤í…ì³
<img width="903" alt="image" src="https://github.com/user-attachments/assets/15b6d910-043c-4e42-b41e-f8ede32422e4">


### ë°°í¬ ì‘ì—…
<img width="982" alt="image" src="https://github.com/user-attachments/assets/ccf5354c-9b31-4ca6-8650-7d8a8c8df0fd">


## 4. ERD 
![image](https://github.com/user-attachments/assets/4336fe28-0665-4488-a408-5f1ee4028a93)

## 5. ì—­í•  ë¶„ë‹´
- ìœ¤í™ì°¬ : ì£¼ë¬¸, ê²°ì œ
- ì´í•œì£¼ : ë©”ë‰´, AI ìš”ì²­
- ì¡°ì°½í˜„ : ë¦¬ë·°, ìœ ì €
- ì¥ìœ¤ì§€ : ì¹´í…Œê³ ë¦¬, ìŒì‹ì 

## ì–´ë ¤ì› ë˜ ì 

### - ë°ì´í„° ë¬´ê²°ì„± ìœ ì§€
- **ë¬¸ì œ**:
  - ë¦¬ë·° ìƒì„± ì‹œ ì£¼ë¬¸ ë° ìŒì‹ì  ì •ë³´ê°€ ìœ íš¨í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œëœ ë°ì´í„°ê°€ ë…¸ì¶œë˜ëŠ” ë¬¸ì œ ë°œìƒ.
- **í•´ê²° ë°©ì•ˆ**:
  - ì†Œí”„íŠ¸ ì‚­ì œ ìƒíƒœë¥¼ í•„í„°ë§í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€. <br>
### - ë¦¬ë·° í‰ì ì„ ê³„ì‚°í•´ ìŒì‹ì  ê²€ìƒ‰ ì‹œ í‰ì  ë…¸ì¶œ JPA N+1 ë¬¸ì œ
ğŸ‘‰ https://blog.naver.com/wooteacher74/223665444762

### - ì¤‘ì²© jsonì—ì„œ ì›í•˜ëŠ” ë°ì´í„° ì¶”ì¶œ

Dto í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ í•œ ë²ˆì— ì¤‘ì²© jsonì„ ë§¤í•‘í•˜ê³  ì‹¶ì—ˆìœ¼ë‚˜ í•˜ì§€ ëª»í•´ì„œ String í´ë˜ìŠ¤ë¡œ ë§¤í•‘í•´ì„œ í•´ê²°

```json
{
    "candidates": [
        {
            "content": {
                "parts": [
                    {
                        "text": "ì—„ë§ˆí‘œ ë§¤ì½¤í•œ ê¹€ì¹˜ê°€ ë“¬ë¿!  ì§‘ê¹€ì¹˜ì˜ ì‹œì›í•œ ë§¤ìš´ë§›ì´ ì¼í’ˆì¸ ê¹€ì¹˜ë§Œë‘ì…ë‹ˆë‹¤.  í•œ ì… ë² ì–´ë¬¼ë©´ ì¤‘ë…ë˜ëŠ” ë§›!\n"
                    }
                ],
                "role": "model"
            },
            "finishReason": "STOP",
            "avgLogprobs": -0.22993026177088419
        }
    ],
    "usageMetadata": {
        "promptTokenCount": 42,
        "candidatesTokenCount": 48,
        "totalTokenCount": 90
    },
    "modelVersion": "gemini-1.5-flash-002"
}
```

```java
    public String aiCreateMenuDescription(String requestText) {
        // ìš”ì²­ URL ë§Œë“¤ê¸°
        URI uri = UriComponentsBuilder
                .fromUriString("https://generativelanguage.googleapis.com")
                .path("/v1beta/models/gemini-1.5-flash-latest:generateContent")
                .queryParam("key", gemeniKey)
                .encode()
                .build()
                .toUri();

        String request = "{\n" +
                "    \"contents\": {\n" +
                "        \"parts\": [\n" +
                "            {\n" +
                "                \"text\": " + "\"" + requestText + "\"" +
                "            }\n" +
                "        ]\n" +
                "    }\n" +
                "}";

        try {
            // String(request) -> json
            JSONParser jsonParser = new JSONParser();
            JSONObject jsonObj = (JSONObject) jsonParser.parse(request);

            ResponseEntity<String> responseEntity = restTemplate.postForEntity(uri, jsonObj, String.class);

            // json -> String(response)
            JSONObject jsonObject = (JSONObject) jsonParser.parse(responseEntity.getBody());
            JSONArray candidates = (JSONArray) jsonObject.get("candidates");
            JSONObject content = (JSONObject) ((JSONObject) candidates.get(0)).get("content");
            JSONArray parts = (JSONArray) content.get("parts");
            String response = (String) ((JSONObject) parts.get(0)).get("text");

            if (response.contains("Please provide me")) {
                throw new IllegalArgumentException("AIì—ê²Œ ë©”ë‰´ë¥¼ ì„¤ëª…í•´ë‹¬ë¼ê³  ì‘ì„±í•´ì£¼ì„¸ìš”.");
            }

            return response;
        } catch (ParseException e) {
            e.printStackTrace();
            throw new IllegalArgumentException("AIì—ê²Œ ë©”ë‰´ë¥¼ ì„¤ëª…í•´ë‹¬ë¼ê³  ì‘ì„±í•´ì£¼ì„¸ìš”.");
        }
    }
```

### ëª…ì„¸ì„œ ë¶„ì„ê³¼ ì‘ì„±
|ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ|í…Œì´ë¸” ëª…ì„¸ì„œ|ERD ëª…ì„¸ì„œ|API ëª…ì„¸ì„œ|ì¸í”„ë¼ ëª…ì„¸ì„œ|
|--|--|--|--|--|
|ê³ ê°ì´ ì–´ë–¤ ê¸°ëŠ¥ì„ ì›í•˜ëŠ”ì§€|ê° ë„ë©”ì¸ì— ì–´ë–¤ í…Œì´ë¸”ì„ êµ¬ì„±í• ì§€|í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í•´ë‚˜ê°ˆì§€|API ë°©ì‹ì€ ì–´ë–»ê²Œ í• ê±´ì§€|ì–´ë–¤ ê¸°ìˆ ì„ ì‚¬ìš©í•´ì„œ ê°œë°œì„ ì§„í–‰í•˜ê³  êµ¬ì„±í• ì§€|
|ë‚´ê°€ ë§Œë“  ê¸°ëŠ¥ì´ ì •ë§ ê³ ê°ì´ ì›í•˜ëŠ”ê±´ì§€|í…Œì´ë¸” ë‚´ì— ì–´ë–¤ í•„ë“œê°’ë“¤ì´ ë“¤ì–´ê°ˆì§€|ì—°ê´€ê´€ê³„ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í•´ì„œ ë¬´ê²°ì„±ì„ í™•ë³´í• ì§€|í†µì¼ëœ req, resë¥¼ ì‘ì„±í•´ì„œ êµ¬ì²´ì  ê°œë°œì´ ê°€ëŠ¥í•˜ê²Œ|ì „ì²´ í”„ë¡œì íŠ¸ì˜ íë¦„ì„ í•œëˆˆì— íŒŒì•…|

### loggingê³¼ swagger

íŒ€ í”„ë¡œì íŠ¸ëŠ” í˜¼ì í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì „ì²´ê°€ í˜‘ì—…í•´ì„œ í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì˜ì‚¬ì†Œí†µì´ ëª…í™•íˆ ì „ë‹¬ë˜ëŠ”ê²Œ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.
ì´ì— ìƒê°í•´ë³¸ ê²ƒì´ loggingê³¼ swaggerë¥¼ ì ìš©í•´ì„œ req, resì— ëŒ€í•œ íŒŒì•…ì„ ì¢€ ë” ì‰½ê²Œ í•´ë³´ê³  ì‹¶ì–´ì„œ ì´ë²ˆ í”„ë¡œì íŠ¸ì— ì ìš©í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

> logging

```java
@Order(Ordered.HIGHEST_PRECEDENCE)
public class ReqResLoggingFilter extends OncePerRequestFilter {

    private static final Logger logger = LoggerFactory.getLogger(ReqResLoggingFilter.class);

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {

        // request ì¶”ì ì„ ìœ„í•œ id ìƒì„±
        MDC.put("traceId", UUID.randomUUID().toString());

        // ë˜í¼ë¡œ ìš”ì²­, ì‘ë‹µ ê°ì‹¸ê¸°.
        final ContentCachingRequestWrapper cachingRequestWrapper = new ContentCachingRequestWrapper(request);
        final ContentCachingResponseWrapper contentCachingResponseWrapper = new ContentCachingResponseWrapper(response);

        // request ì •ë³´ ë¡œê¹….
        logger.info("Request Method: {}", cachingRequestWrapper.getMethod());
        logger.info("Request URL: {}", cachingRequestWrapper.getRequestURL());

        // request í—¤ë” ë¡œê¹….
        StringBuilder headers = new StringBuilder();
        cachingRequestWrapper.getHeaderNames().asIterator().forEachRemaining(headerName ->
                headers.append(headerName).append(": ").append(cachingRequestWrapper.getHeader(headerName)).append("\n"));
        logger.info("Request Headers:\n{}", headers);

        // ë‹¤ìŒ í•„í„° ë˜ëŠ” ì„œë¸”ë¦¿ í˜¸ì¶œ.
        filterChain.doFilter(cachingRequestWrapper, contentCachingResponseWrapper);

        // requestbodyì— passwordê°€ ë“¤ì–´ìˆì„ì‹œ ë¡œê¹…x
        String requestBody = new String(cachingRequestWrapper.getContentAsByteArray(), cachingRequestWrapper.getCharacterEncoding());
        if (requestBody.contains("password")) {
            logger.info("ê°œì¸ì •ë³´ì˜ ì¤‘ìš” ë¶€ë¶„ì´ í¬í•¨ë˜ì–´ Request Body ë¡œê¹…ì´ ì œí•œë©ë‹ˆë‹¤.");
        } else {
            logger.info("Request Body: \n{}", requestBody);
        }

        // response í›„ ë¡œê¹… ë° ë³´ê¸° ì¢‹ê²Œ ë‹¤ë“¬ê¸°.
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.enable(SerializationFeature.INDENT_OUTPUT); // ì¤„ë°”ê¿ˆ ë° ë“¤ì—¬ì“°ê¸° í™œì„±í™”

        String responseBody = new String(contentCachingResponseWrapper.getContentAsByteArray(), StandardCharsets.UTF_8);

        logger.info("Response Status: {}", contentCachingResponseWrapper.getStatus());
        logger.info("Response Header - Authorization: {}", contentCachingResponseWrapper.getHeader("Authorization"));

        if (responseBody.isEmpty()) {
            logger.info("Response body is empty");
            MDC.clear();

            return;
        } else if (responseBody.contains("<html") || responseBody.contains("swagger-ui/oauth2-redirect.html") || responseBody.contains("localhost:8080")) {
            logger.info("html response");
            contentCachingResponseWrapper.copyBodyToResponse();
            MDC.clear();

            return;
        }

        Object json = objectMapper.readValue(responseBody, Object.class); // JSON ë¬¸ìì—´ì„ ê°ì²´ë¡œ ë³€í™˜
        String prettyResponseBody = objectMapper.writeValueAsString(json); // ë‹¤ì‹œ í¬ë§·ëœ JSON ë¬¸ìì—´ë¡œ ë³€í™˜

        logger.info("Response Content: \n{}", prettyResponseBody);

        contentCachingResponseWrapper.copyBodyToResponse();

        MDC.clear();
    }

    // swaggerì˜ ê²½ìš°, ì´í›„ í•„í„°(security)ë¥¼ ì§„í–‰ì‹œí‚¤ì§€ ì•Šë„ë¡ ì„¤ì •..
    @Override
    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {
        String[] excludePath = {"/swagger-ui/",
                "/swagger-ui/**",
                "/v3/api-docs/**",
                "/swagger-resources/**",
                "/webjars/**"};
        String path = request.getRequestURI();
        return Arrays.stream(excludePath).anyMatch(path::startsWith);
    }
}
```

![image](https://github.com/user-attachments/assets/16bcc7bd-d60d-4de3-8229-9216695ece75)


AOP ë°©ì‹ì„ íƒí•´ì„œ ì¢€ë” controllerë‹¨ê³¼ ê°€ê¹Œìš´ ê³³ì—ì„œ ë©”ì†Œë“œì˜ íë¦„ì„ ë³´ë„ë¡ í• ê²ƒì¸ì§€ ì•„ë‹ˆë©´ filterìª½ì— ì ìš©ì„ í•´ì„œ requestë¥¼ ë°›ì•„ì˜¤ëŠ” ê°€ì¥ ê°€ê¹Œìš´ ê³³ì—ì„œ reqë¥¼ ë³¼ ê²ƒì¸ì§€ì— ëŒ€í•´ ì ìš© ì‹œì ì´ ì¼ë‹¨ ì–´ëŠì •ë„ ê°œë°œì´ ì§„í–‰ëœ ìƒíƒœë¼ filterìª½ì— loggingì„ ë„£ì–´ reqì™€ resë¥¼ íŒŒì•…í•˜ê¸° ì‰½ê²Œí–ˆìŠµë‹ˆë‹¤.

ì „ì²´ì ì¸ íë¦„ìœ¼ë¡œ ë³´ë©´ ê° requestë§ˆë‹¤ traceIdë¥¼ uuidë¡œ ìƒì„±í•˜ì—¬ ìš”ì²­ì„ ì¶”ì í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ê³  ìš”ì²­ urlì´ ì–´ë””ì¸ì§€, headerëŠ” ë­ê°€ ìˆëŠ”ì§€, bodyì—ëŠ” ë­ê°€ ìˆëŠ”ì§€ ë“±ë“±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
responseëŠ” headerì— jwtê°€ ìˆëŠ”ì§€, bodyì—ëŠ” ì–´ë–¤ ê²ƒì´ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í”„ë¡œì íŠ¸ì—ëŠ” securityê°€ ì ìš©ë˜ì–´ ìˆëŠ”ë° security filterì˜ ê²½ìš° ìš°ì„ ìˆœìœ„ê°€ ìµœìƒìœ„ (-100)ë¡œ ì„¤ì •ë˜ì–´ ê°€ì¥ ë¹ ë¥´ê²Œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 
ê·¸ë ‡ê¸° ë•Œë¬¸ì— security configì—ì„œ ê°€ì¥ ë¹ ë¥¸ filterì•ì— ì˜¤ë„ë¡ ì„¤ì •í•´ì£¼ê³ , @orderë¥¼ ì´ìš©í•´ ìˆœì„œë¥¼ ìµœìƒìœ„ë¡œ ë§Œë“¤ì–´ì„œ 
clientì˜ requestì— ê°€ì¥ ë¨¼ì € filterë¥¼ ê±°ì³ ì–´ë–¤ ìš”ì²­ì´ ì˜¤ëŠ”ì§€ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

ì¶”ê°€ë¡œ ì—¬ëŸ¬ ì„¤ì •ë“¤ì´ ì¶”ê°€ë˜ì—ˆëŠ”ë° Config.javaë‚˜ resourceì— .xml íŒŒì¼ ì‘ì„± ë“±.. ì‹œê°„ì„ ì°¸ ë§ì´ ì¡ì•„ë¨¹ê³  ì—ëŸ¬ë„ ì°¸ ë§ì´ ë°œìƒí–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.


> swagger

ì´ í”„ë¡œì íŠ¸ë¥¼ ì²˜ìŒ ë³´ëŠ” ê°œë°œì ì…ì¥ì—ì„œ ì–´ë–»ê²Œ í•˜ë©´ ì¢€ ë” ì‰½ê³  ëª…í™•í•˜ê²Œ ì´í•´ì‹œí‚¬ ìˆ˜ ìˆì„ê¹Œ ê³ ë¯¼ ëì— swaggerì™€ rest docsë¥¼ ì•Œê²Œ ë˜ì—ˆê³ 
ì´ì¤‘ swaggerë¥¼ ì„ íƒí•œ ì´ìœ ëŠ” rest docsëŠ” êµ¬í˜„ê¹Œì§€ ì‹œê°„ì´ ë¶€ì¡±í•  ê²ƒì´ë¼ê³  íŒë‹¨í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/dbfaf2ac-9093-4d2d-bdb6-1c962009ec41)

![image](https://github.com/user-attachments/assets/9c61a2d3-dc31-4788-a9fd-066a54ec28ba)

ì§ì ‘ swagger ì‚¬ìš©í•´ë³´ê³  ì‹¶ìœ¼ì‹œë©´ ğŸ‘‰ [click here](http://ec2-3-35-214-44.ap-northeast-2.compute.amazonaws.com:8080/swagger-ui/index.html) 
*Order controller, Payment controllerë§Œ custom ë˜ì–´ìˆìŠµë‹ˆë‹¤ë§Œ, í˜„ì¬ëŠ” UUIDê°€ ë§ì§€ ì•ŠëŠ” ê²ƒì´ ë§ì´ ìˆì–´ ìˆ˜ì •ì¤‘ì— ìˆìŠµë‹ˆë‹¤.*

<br><br>


## í”„ë¡œì íŠ¸ íšŒê³ 
- ìœ¤í™ì°¬ : ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ë¡œì§ì„ ì–´ë–»ê²Œ êµ¬ì„±í• ì§€ì— ëŒ€í•œ ê³ ë¯¼ì„ ì°¸ ë§ì´ í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê°„ë‹¨í•œ ì˜ˆë¡œ ë‹¨ìˆœíˆ ì£¼ë¬¸ì„ ìƒì„±í•˜ëŠ” ì„œë¹„ìŠ¤ ë¡œì§ì„ êµ¬í˜„í•¨ì— ìˆì–´ì„œ ì‹¤ì œë¡œ ì–´ë–¤ ì¡°ê±´ë“¤ì´ ìˆì„ê¹Œ..ì´ì „ì—ëŠ” ëª°ëì§€ë§Œ ì‚¬ì‹¤ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œì˜ ë¶„ì„, í…Œì´ë¸”/ERD/API/ì¸í”„ë¼ ë“±ë“± ëª…ì„¸ì„œ ì‘ì„±ì´ ì •ë§ ì¤‘ìš”í•˜ë‹¤ê³  ëŠê¼ˆìŠµë‹ˆë‹¤.ëª¨ë“  í”„ë¡œì íŠ¸ì˜ ê¸°ì´ˆê°€ ë˜ëŠ” ë§Œí¼ ì•„ë§ˆ ì•ìœ¼ë¡œ ì´ ë¶€ë¶„ì—ì„œ ì •ë§ ë§ì€ ì‹œê°„ì„ íˆ¬ìí•˜ê²Œ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ë§ëŠ” êµ¬í˜„ì— ìˆì–´ì„œë„ ê³ ë¯¼ì´ ë§ì•˜ìŠµë‹ˆë‹¤.

```java
@Transactional
    public OrderResponseDto createOrder(OrderRequestDto orderRequestDto, User user) {

        User userInfo = userRepository.findByEmail(user.getEmail()).orElseThrow(()
                -> new IllegalArgumentException("ìœ ì € ì •ë³´ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”"));

        Address address;

        if ((orderRequestDto.getAddress().isEmpty())
                && (orderRequestDto.getDetailAddress().isEmpty())) {
            // ì£¼ì†Œì§€ê°€ ë”°ë¡œ ì…ë ¥ë˜ì§€ ì•Šì€ ê²½ìš°
            if (orderRequestDto.getOrderType().equals(OrderTypeEnum.TAKEOUT)) {
                UUID storeId = orderRequestDto.getStoreId();
                Address storeAddress = storeRepository.findById(storeId).orElseThrow(
                        () -> new IllegalArgumentException("ê°€ê²Œ IDë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”")).getAddress();

                address = buildAddressUseAddress(storeAddress);
            } else {
                Address basicUserAddress = userInfo.getAddress();

                address = buildAddressUseAddress(basicUserAddress);
            }
```
ë‹¨ìˆœíˆ ì£¼ë¬¸ ìƒì„±ì´ì§€ë§Œ ì£¼ì†Œì§€ê°€ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°ì™€ ì£¼ì†Œì§€ê°€ ì•ˆë“¤ì–´ì˜¨ ê²½ìš°ê°€ ìˆì„í…ë° ì£¼ì†Œì§€ê°€ ì•ˆë“¤ì–´ì˜¨ ê²½ìš° ì¤‘ì—ì„œ í¬ì¥ì¸ ê²½ìš°ì—” ê°€ê²Œì˜ ì£¼ì†Œë¥¼, ë°°ë‹¬ì¸ ê²½ìš° userì˜ ê¸°ë³¸ ì£¼ì†Œë¥¼.. ëª¨ë“  APIì— ëŒ€í•´ì„œ ê³¼ì—° ë‹¨ìˆœí•œ CRUDê°€ ì•„ë‹ˆë¼ ì–´ë–¤ ì¡°ê±´ì´ ë“¤ì–´ì˜¤ê²Œ ë˜ì–´ì„œ ê²°ê³¼ê°€ ë°”ë€”ì§€ì— ëŒ€í•œ ìƒê°ì„ ë§ì´ í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë˜í•œ loggingê³¼ swaggerë¥¼ ì œì™¸í•´ë²„ë¦¬ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì¢€ ë” ìƒì„¸íˆ êµ¬í˜„í•œë‹¤ë˜ê°€, ë¯¸ì³ êµ¬í˜„í•˜ì§€ ëª»í–ˆë˜ ê¸°ëŠ¥ì„ í•´ë³¸ë‹¤ë˜ê°€.. í•˜ëŠ” ìƒê°ì„ í–ˆì—ˆì§€ë§Œ ì œê°€ êµ¬í˜„í•œ ê²ƒì„ ë‚¨ë“¤ì´ ë” ì˜ ë‹¤ë£° ìˆ˜ ìˆê²Œ, ì–´ë–¤ ê¸°ëŠ¥ë“¤ì´ ìˆëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ë” í° ê°€ì¹˜ê°€ ìˆë‹¤ê³  íŒë‹¨í•˜ê³  ì´ ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤. 

ì´ë²ˆì— í”„ë¡œì íŠ¸ë¥¼ í•  ë•Œ test codeì™€ debuggingì„ ë§ì´ í™œìš©í•˜ì§€ ëª»í•œ ë¶€ë¶„ì— ëŒ€í•œ ì•„ì‰¬ì›€ë„ ìƒê°ë‚©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ë¡œì§ì„ ë§Œë“¤ê³  app ì‹¤í–‰ í›„ postmanìœ¼ë¡œ ê²€ì¦í•˜ëŠ” ë¶€ë¶„ì´ ë§ì•˜ê¸° ë•Œë¬¸ì— ì´ì „ì— unit test ë“±ì„ ë§ì´ í•˜ì˜€ìœ¼ë©´ ì¡°ê¸°ì— ë¬¸ì œë¥¼ ë°œê²¬ í–ˆì„í…ë°..í•˜ëŠ” ìƒê°ì„ ë§ì´ í–ˆì—ˆìŠµë‹ˆë‹¤. debuggingë„ ë§ˆì°¬ê°€ì§€ë¡œ consoleì— í•˜ë‚˜í•˜ë‚˜ ì¶œë ¥í•´ë³´ëŠ” ê²½ìš°ê°€ ë§ì•˜ëŠ”ë° ë‹¤ìŒë¶€í„°ëŠ” debuggingì„ ì´ìš©í•´ì„œ bugë¥¼ ì°¾ê³  ì½”ë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ê² ìŠµë‹ˆë‹¤.

- ì´í•œì£¼ : 
- ì¡°ì°½í˜„ : ë˜í•œ, ë‹¨ìˆœíˆ ê¸°ìˆ ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë„˜ì–´ ìŒì‹ ì£¼ë¬¸ ê´€ë¦¬ í”Œë«í¼ì˜ ë„ë©”ì¸ ë¡œì§ì„ ê¹Šì´ ì´í•´í•˜ê³  ì´ë¥¼ ì½”ë“œë¡œ í’€ì–´ë‚´ëŠ” ê³¼ì •ì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.
- ì¥ìœ¤ì§€ : ìŒì‹ì  ìƒì„± apië¥¼ í˜¸ì¶œí•  ë•Œ postcodeì˜ ë°ì´í„° ê°’ì„ varchar(6)ìœ¼ë¡œ ì„¤ì •í•˜ê³  6ë³´ë‹¤ ì‘ì€ ê¸¸ì´ì˜ ê°’ì„ ë„£ì–´ í…ŒìŠ¤íŠ¸í•˜ì˜€ëŠ”ë° ê³„ì† 6ë³´ë‹¤ ê¸´ ê¸¸ì´ì˜ ê°’ì´ ë“¤ì–´ê°”ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì‚´í´ë³´ë‹ˆ, Address í´ë˜ìŠ¤ì˜ ìƒì„±ì ë§¤ê°œë³€ìˆ˜ ìˆœì„œì™€ createStore ë©”ì„œë“œì—ì„œ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ëŠ” ì¸ìˆ˜ì˜ ìˆœì„œê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ì„œ ê³„ì† ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë˜ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ìˆœì„œê°€ ì¼ì¹˜í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— postcode ê°’ì—ëŠ” addressê°€, addressê°’ì—ëŠ” postcodeê°€ ë“¤ì–´ê°€ ìˆì–´ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ì„ì„ ì¸ì§€í•œ í›„ ìˆœì„œë¥¼ ë°”ê¿”ì£¼ë‹ˆ ì •ìƒ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. 
![image](https://github.com/user-attachments/assets/08cb0d18-e661-415f-8abb-b444ccb00057)

